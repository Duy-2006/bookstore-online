# ==============================================================
# 1. THÔNG TIN ỨNG DỤNG & SERVER
# ==============================================================
spring.application.name=BookStoreOnline
server.port=8080
server.servlet.context-path=/
# Thời gian timeout của phiên đăng nhập (30 phút)
server.servlet.session.timeout=30m

# ==============================================================
# 2. MÃ HÓA (HỖ TRỢ TIẾNG VIỆT 100%)
# ==============================================================
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# ==============================================================
# 3. KẾT NỐI DATABASE (SQL SERVER)
# ==============================================================
# Lưu ý: trustServerCertificate=true để tránh lỗi SSL
spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=BookStoree;encrypt=true;trustServerCertificate=true;
spring.datasource.username=sa
spring.datasource.password=123
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# ==============================================================
# 4. JPA / HIBERNATE (QUẢN LÝ DỮ LIỆU)
# ==============================================================
# [QUAN TRỌNG] Để 'none' vì ta đã tạo bảng bằng tay. Không để 'update' để tránh lỗi sửa bảng.
spring.jpa.hibernate.ddl-auto=none

# Hiển thị câu lệnh SQL trong Console để debug
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Dialect chuẩn cho SQL Server
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# Giữ kết nối DB mở cho View (Tránh lỗi LazyInitializationException)
spring.jpa.open-in-view=true

# [CỰC KỲ QUAN TRỌNG - FIX LỖI TÊN BẢNG]
# Dòng này ép Hibernate dùng đúng tên "InventoryLogs" (viết hoa) thay vì tự sửa thành "inventory_logs"
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

# ==============================================================
# 5. CẤU HÌNH UPLOAD FILE (FIX LỖI 500 KHI LƯU SÁCH)
# ==============================================================
spring.servlet.multipart.enabled=true
# Tăng dung lượng lên 50MB (Thoải mái upload ảnh HD)
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB

# Cấu hình Tomcat xử lý file lớn
server.tomcat.max-swallow-size=100MB
server.tomcat.max-http-post-size=100MB

# ==============================================================
# 6. GIAO DIỆN (THYMELEAF) & TÀI NGUYÊN TĨNH
# ==============================================================
# Tắt cache để khi sửa HTML xong refresh trình duyệt là thấy ngay (Chế độ Dev)
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.mode=HTML

spring.web.resources.static-locations=classpath:/static/

# ==============================================================
# 7. LOGGING (NHẬT KÝ HỆ THỐNG)
# ==============================================================
logging.level.root=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=ERROR